{
  "name": "MemoryVerse AI - Email Marketing & Onboarding",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "user-registered",
        "responseMode": "lastNode"
      },
      "id": "webhook-user-registered",
      "name": "Webhook - Novo UsuÃ¡rio",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 300]
    },
    {
      "parameters": {
        "amount": 2,
        "unit": "minutes"
      },
      "id": "wait-2min",
      "name": "Aguardar 2 minutos",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1,
      "position": [450, 300]
    },
    {
      "parameters": {
        "fromEmail": "contato@memoryverse.com.br",
        "toEmail": "={{ $json.email }}",
        "subject": "ğŸ‰ Bem-vindo ao MemoryVerse AI!",
        "emailType": "html",
        "message": "<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n    .header { background: linear-gradient(135deg, #7c3aed 0%, #3b82f6 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }\n    .content { background: #f9fafb; padding: 30px; }\n    .button { display: inline-block; background: #7c3aed; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; margin: 20px 0; }\n    .feature { background: white; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #7c3aed; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>âœ¨ Bem-vindo ao MemoryVerse AI!</h1>\n    </div>\n    <div class=\"content\">\n      <p>OlÃ¡ <strong>{{ $json.name }}</strong>,</p>\n      \n      <p>Estamos muito felizes em ter vocÃª conosco! ğŸŠ</p>\n      \n      <p>VocÃª acabou de desbloquear o poder de transformar suas memÃ³rias em arte com inteligÃªncia artificial.</p>\n      \n      <h3>ğŸ VocÃª ganhou 3 memÃ³rias grÃ¡tis!</h3>\n      \n      <div class=\"feature\">\n        <strong>ğŸ¬ VÃ­deos CinematogrÃ¡ficos</strong><br>\n        Transforme suas histÃ³rias em vÃ­deos emocionantes com narraÃ§Ã£o profissional\n      </div>\n      \n      <div class=\"feature\">\n        <strong>ğŸµ MÃºsicas Personalizadas</strong><br>\n        Crie trilhas sonoras Ãºnicas baseadas nas suas memÃ³rias\n      </div>\n      \n      <div class=\"feature\">\n        <strong>ğŸ“– Livros Ilustrados</strong><br>\n        Suas histÃ³rias ganham vida em pÃ¡ginas belamente ilustradas\n      </div>\n      \n      <div class=\"feature\">\n        <strong>ğŸ™ï¸ Podcasts Narrativos</strong><br>\n        Transforme memÃ³rias em episÃ³dios de podcast profissionais\n      </div>\n      \n      <a href=\"https://memoryverse.com.br/dashboard\" class=\"button\">Criar Minha Primeira MemÃ³ria â†’</a>\n      \n      <p><strong>Dica:</strong> Quanto mais detalhes vocÃª fornecer na sua histÃ³ria, mais rica e emocionante serÃ¡ sua memÃ³ria!</p>\n      \n      <p>Qualquer dÃºvida, estamos aqui para ajudar! ğŸ’œ</p>\n      \n      <p>AbraÃ§os,<br><strong>Equipe MemoryVerse AI</strong></p>\n    </div>\n  </div>\n</body>\n</html>",
        "options": {}
      },
      "id": "send-welcome-email",
      "name": "Enviar Email de Boas-Vindas",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [650, 300],
      "credentials": {
        "smtp": {
          "id": "4",
          "name": "SMTP Email"
        }
      }
    },
    {
      "parameters": {
        "amount": 1,
        "unit": "days"
      },
      "id": "wait-1day",
      "name": "Aguardar 1 dia",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1,
      "position": [850, 300]
    },
    {
      "parameters": {
        "url": "={{ $env.VITE_APP_URL }}/api/trpc/memories.getByUserId",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "userId",
              "value": "={{ $json.userId }}"
            }
          ]
        }
      },
      "id": "check-memories",
      "name": "Verificar MemÃ³rias Criadas",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [1050, 300]
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.memories.length }}",
              "operation": "equal",
              "value2": 0
            }
          ]
        }
      },
      "id": "if-no-memories",
      "name": "NÃ£o Criou MemÃ³rias?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1250, 300]
    },
    {
      "parameters": {
        "fromEmail": "contato@memoryverse.com.br",
        "toEmail": "={{ $json.email }}",
        "subject": "ğŸ’¡ Precisa de ajuda para comeÃ§ar?",
        "emailType": "html",
        "message": "<!DOCTYPE html>\n<html>\n<body style=\"font-family: Arial; padding: 20px;\">\n  <h2>OlÃ¡ {{ $json.name }},</h2>\n  \n  <p>Notamos que vocÃª ainda nÃ£o criou sua primeira memÃ³ria... ğŸ˜Š</p>\n  \n  <p>Sabemos que comeÃ§ar pode parecer difÃ­cil, entÃ£o preparamos algumas ideias para vocÃª:</p>\n  \n  <ul>\n    <li>ğŸ‚ <strong>AniversÃ¡rio especial</strong> - Aquele dia inesquecÃ­vel</li>\n    <li>âœˆï¸ <strong>Viagem dos sonhos</strong> - A aventura que mudou tudo</li>\n    <li>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ <strong>Momento em famÃ­lia</strong> - MemÃ³rias que aquecem o coraÃ§Ã£o</li>\n    <li>ğŸ“ <strong>Conquista importante</strong> - Aquela vitÃ³ria que vocÃª celebrou</li>\n    <li>ğŸ’‘ <strong>HistÃ³ria de amor</strong> - Como tudo comeÃ§ou</li>\n  </ul>\n  \n  <p><strong>Ã‰ super simples:</strong></p>\n  <ol>\n    <li>Conte sua histÃ³ria (pode ser curta!)</li>\n    <li>Escolha o formato (vÃ­deo, mÃºsica, livro...)</li>\n    <li>Aguarde 5 minutos</li>\n    <li>Pronto! Sua memÃ³ria estÃ¡ pronta ğŸ‰</li>\n  </ol>\n  \n  <a href=\"https://memoryverse.com.br/dashboard\" style=\"display: inline-block; background: #7c3aed; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; margin: 20px 0;\">Criar Agora (Ainda tenho 3 grÃ¡tis!) â†’</a>\n  \n  <p>Qualquer dÃºvida, Ã© sÃ³ responder este email! ğŸ’œ</p>\n</body>\n</html>"
      },
      "id": "send-reminder-email",
      "name": "Email - Lembrete para Criar",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [1450, 200]
    },
    {
      "parameters": {
        "amount": 3,
        "unit": "days"
      },
      "id": "wait-3days",
      "name": "Aguardar 3 dias",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1,
      "position": [1450, 400]
    },
    {
      "parameters": {
        "fromEmail": "contato@memoryverse.com.br",
        "toEmail": "={{ $json.email }}",
        "subject": "ğŸ Oferta Especial: 50% OFF no Plano Creator!",
        "emailType": "html",
        "message": "<!DOCTYPE html>\n<html>\n<body style=\"font-family: Arial; padding: 20px;\">\n  <div style=\"background: linear-gradient(135deg, #7c3aed 0%, #3b82f6 100%); color: white; padding: 30px; text-align: center; border-radius: 10px;\">\n    <h1>ğŸ‰ Oferta Exclusiva para VocÃª!</h1>\n    <h2 style=\"font-size: 48px; margin: 20px 0;\">50% OFF</h2>\n    <p style=\"font-size: 20px;\">no Plano Creator por 3 meses</p>\n  </div>\n  \n  <div style=\"padding: 30px;\">\n    <p>OlÃ¡ {{ $json.name }},</p>\n    \n    <p>Vimos que vocÃª adorou suas primeiras memÃ³rias! ğŸŠ</p>\n    \n    <p>Preparamos uma oferta <strong>exclusiva</strong> para vocÃª continuar criando:</p>\n    \n    <div style=\"background: #f9fafb; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n      <h3>âœ¨ Plano Creator</h3>\n      <p style=\"text-decoration: line-through; color: #999;\">De R$ 97/mÃªs</p>\n      <p style=\"font-size: 32px; color: #7c3aed; font-weight: bold;\">Por apenas R$ 48,50/mÃªs</p>\n      <ul>\n        <li>âœ… 50 memÃ³rias por mÃªs</li>\n        <li>âœ… Todos os formatos (vÃ­deo, mÃºsica, livro, podcast)</li>\n        <li>âœ… Qualidade HD/4K</li>\n        <li>âœ… Sem marca d'Ã¡gua</li>\n        <li>âœ… Download ilimitado</li>\n        <li>âœ… Suporte prioritÃ¡rio</li>\n      </ul>\n    </div>\n    \n    <p><strong>â° Oferta vÃ¡lida por 48 horas!</strong></p>\n    \n    <a href=\"https://memoryverse.com.br/pricing?coupon=CREATOR50\" style=\"display: inline-block; background: #7c3aed; color: white; padding: 15px 40px; text-decoration: none; border-radius: 6px; font-size: 18px; margin: 20px 0;\">Aproveitar Oferta â†’</a>\n    \n    <p>NÃ£o perca essa chance! ğŸ’œ</p>\n  </div>\n</body>\n</html>"
      },
      "id": "send-upsell-email",
      "name": "Email - Upsell 50% OFF",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [1650, 400]
    },
    {
      "parameters": {
        "amount": 7,
        "unit": "days"
      },
      "id": "wait-7days",
      "name": "Aguardar 7 dias",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1,
      "position": [1850, 400]
    },
    {
      "parameters": {
        "fromEmail": "contato@memoryverse.com.br",
        "toEmail": "={{ $json.email }}",
        "subject": "ğŸ“Š Como estÃ¡ sendo sua experiÃªncia?",
        "emailType": "html",
        "message": "<!DOCTYPE html>\n<html>\n<body style=\"font-family: Arial; padding: 20px;\">\n  <h2>OlÃ¡ {{ $json.name }},</h2>\n  \n  <p>Esperamos que esteja adorando o MemoryVerse AI! ğŸ’œ</p>\n  \n  <p>GostarÃ­amos muito de saber sua opiniÃ£o para melhorarmos ainda mais:</p>\n  \n  <div style=\"text-align: center; margin: 30px 0;\">\n    <p><strong>Como vocÃª avalia sua experiÃªncia?</strong></p>\n    <a href=\"https://memoryverse.com.br/feedback?rating=5&userId={{ $json.userId }}\" style=\"display: inline-block; margin: 5px; font-size: 30px;\">â­â­â­â­â­</a><br>\n    <a href=\"https://memoryverse.com.br/feedback?rating=4&userId={{ $json.userId }}\" style=\"display: inline-block; margin: 5px; font-size: 30px;\">â­â­â­â­</a><br>\n    <a href=\"https://memoryverse.com.br/feedback?rating=3&userId={{ $json.userId }}\" style=\"display: inline-block; margin: 5px; font-size: 30px;\">â­â­â­</a>\n  </div>\n  \n  <p>Seu feedback Ã© muito importante para nÃ³s! ğŸ™</p>\n  \n  <p>Obrigado por fazer parte da nossa comunidade!</p>\n</body>\n</html>"
      },
      "id": "send-feedback-email",
      "name": "Email - Solicitar Feedback",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [2050, 400]
    }
  ],
  "connections": {
    "Webhook - Novo UsuÃ¡rio": {
      "main": [
        [
          {
            "node": "Aguardar 2 minutos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aguardar 2 minutos": {
      "main": [
        [
          {
            "node": "Enviar Email de Boas-Vindas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enviar Email de Boas-Vindas": {
      "main": [
        [
          {
            "node": "Aguardar 1 dia",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aguardar 1 dia": {
      "main": [
        [
          {
            "node": "Verificar MemÃ³rias Criadas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Verificar MemÃ³rias Criadas": {
      "main": [
        [
          {
            "node": "NÃ£o Criou MemÃ³rias?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "NÃ£o Criou MemÃ³rias?": {
      "main": [
        [
          {
            "node": "Email - Lembrete para Criar",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aguardar 3 dias",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aguardar 3 dias": {
      "main": [
        [
          {
            "node": "Email - Upsell 50% OFF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email - Upsell 50% OFF": {
      "main": [
        [
          {
            "node": "Aguardar 7 dias",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aguardar 7 dias": {
      "main": [
        [
          {
            "node": "Email - Solicitar Feedback",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  }
}
